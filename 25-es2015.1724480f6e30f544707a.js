(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"65W2":function(e,t,r){"use strict";r.r(t),r.d(t,"EditProfileModule",(function(){return A}));var i=r("ofXK"),s=r("tyNb"),o=r("PCNd"),n=r("3Pt+"),a=r("Lw2Y"),c=r("zzOR"),l=r("fXoL"),d=r("AwSQ"),b=r("6uu6"),u=r("8cFx"),m=r("4ioC"),h=r("9LzP"),p=r("/SVk"),f=r("ZOsW");function g(e,t){if(1&e&&l.Nb(0,"span",53),2&e){const e=l.gc();l.lc("innerHTML",e.formErrors.email,l.Ac)}}function S(e,t){1&e&&l.Nb(0,"i",54)}function v(e,t){1&e&&l.Nb(0,"i",55)}function R(e,t){if(1&e&&l.Nb(0,"span",53),2&e){const e=l.gc();l.lc("innerHTML",e.formErrors.phone_number,l.Ac)}}function _(e,t){1&e&&l.Nb(0,"i",54)}function q(e,t){1&e&&l.Nb(0,"i",55)}function y(e,t){if(1&e){const e=l.Tb();l.Sb(0,"a",63),l.ec("click",(function(){l.zc(e);const t=l.gc().$implicit;return l.gc().setDefaultAddress(null==t?null:t.id)})),l.Sb(1,"p",66),l.Nb(2,"i",67),l.Ic(3," Default"),l.Rb(),l.Rb()}}function w(e,t){if(1&e){const e=l.Tb();l.Sb(0,"a",63),l.ec("click",(function(){l.zc(e);const t=l.gc().$implicit;return l.gc().deleteObject(t)})),l.Sb(1,"p",64),l.Nb(2,"i",68),l.Ic(3," Remove"),l.Rb(),l.Rb()}}const L=function(e){return{"border-success":e}};function I(e,t){if(1&e){const e=l.Tb();l.Qb(0),l.Sb(1,"div",56),l.Sb(2,"div",57),l.Sb(3,"h5",58),l.Ic(4),l.Rb(),l.Sb(5,"p",59),l.Ic(6,"This is a wider card with supporting text below as a natural lead-in to additional content. This card has even longer content than the first to show that equal height action."),l.Rb(),l.Sb(7,"p",59),l.Sb(8,"small",60),l.Ic(9,"Last updated 3 mins ago"),l.Rb(),l.Rb(),l.Sb(10,"div",61),l.Gc(11,y,4,0,"a",62),l.Sb(12,"a",63),l.ec("click",(function(){l.zc(e);const r=t.$implicit;return l.gc().editObject(r)})),l.Sb(13,"p",64),l.Nb(14,"i",65),l.Ic(15," Update"),l.Rb(),l.Rb(),l.Gc(16,w,4,0,"a",62),l.Rb(),l.Rb(),l.Rb(),l.Pb()}if(2&e){const e=t.$implicit;l.zb(1),l.lc("ngClass",l.qc(4,L,e.is_default)),l.zb(3),l.Jc(null==e?null:e.name),l.zb(7),l.lc("ngIf",!e.is_default),l.zb(5),l.lc("ngIf",!e.is_default)}}const F=function(e){return{"has-error":e}},C=function(){return["/profile"]};let x=(()=>{class e{constructor(e,t,r,i,s){this.router=e,this.fb=t,this.dataService=r,this.authService=i,this.commonService=s,this.formErrors={email:"",first_name:"",last_name:"",apierror:"",phone_number:""},this.showLoader=!1,this.showLoaderr=!1,this.selecteFile=null,this.editImageUrl=null,this.stateListArray=[],this.cityListArray=[],this.currentCompanyDetail=null,this.isEditing=!1,this.editId=null,this.addressList=[],this.addForm=t.group({user_name:[null,n.q.compose([n.q.required])],email:[null,n.q.compose([n.q.required,a.f])],first_name:[null,n.q.compose([n.q.required])],last_name:[null,n.q.compose([n.q.required])],phone_number:[null,n.q.compose([n.q.required,n.q.minLength(8),n.q.maxLength(15)])]}),this.addressForm=t.group({name:[null,n.q.compose([n.q.required])],country:[null,n.q.compose([n.q.required])],street_address:[null,n.q.compose([n.q.required])],state:[null,n.q.compose([n.q.required])],pincode:[null,n.q.compose([n.q.required,n.q.minLength(4),n.q.maxLength(8)])],dial_code:[null,n.q.compose([n.q.required])],taluk:[null,n.q.compose([n.q.required])],district:[null,n.q.compose([n.q.required])],city:[null,n.q.compose([n.q.required])],is_default:[!1,n.q.compose([n.q.required])],phone_number:[null,n.q.compose([n.q.required,n.q.minLength(8),n.q.maxLength(15)])]})}ngOnInit(){this.setuserData(),this.getCountryList(),this.getUseraddress()}setDileCode(e){e.phone_code&&e&&this.addressForm.patchValue({dial_code:e.phone_code})}getCountryList(){this.commonService.countryList().subscribe(e=>{e.success&&(this.countryListArray=e.data)})}getpincode(e){e.target.value&&!isNaN(Number(e.target.value))&&e.target.value.length>5&&this.commonService.zipcodeList({pincode:e.target.value}).subscribe(e=>{e.success&&(this.pincodeListArray=e.data,this.pincodeListArray.filter((e,t)=>{this.pincodeListArray[t].label=e.office_name+" - "+e.pincode}),this.removeaddress(),this.setaddress(this.pincodeListArray[0]))})}setaddress(e){e&&e.label&&this.addressForm.patchValue({street_address:e.label,state:e.state_name,pincode:e.pincode,taluk:e.taluk,district:e.district_name})}removeaddress(){this.addressForm.patchValue({street_address:"",city:"",state:"",pincode:"",taluk:"",district:""})}setuserData(){this.dataService.currentUser.subscribe(e=>{e&&(this.currentUserDetail=e,this.editImageUrl=e.image,this.addForm.patchValue({first_name:this.currentUserDetail.first_name,last_name:this.currentUserDetail.last_name,user_name:this.currentUserDetail.name,email:this.currentUserDetail.email,phone_number:this.currentUserDetail.phone_number}))})}getProfile(){this.commonService.getProfile().subscribe(e=>{e.success&&(this.dataService.updateAuth(e.data.User),this.dataService.updateCart(e.data.cart),this.dataService.updateAddress(e.data.address))},e=>{this.dataService.purgeAuth()})}fileChangeEvent(e){if(!e.target.files[0].name.match(/(.*?)\.(jpg|jpeg|png|gif|giff)$/))return swal.fire("Invalid File!","Please select valid file ","error"),this.removeFile(),!1;this.removeFile(),this.selecteFile=e.target.files[0],console.log("selecteFile",this.selecteFile)}removeFile(){this.selecteFile=null}submitForm(e){if(e.valid){this.showLoader=!0;const t=new FormData;t.append("user_name",e.value.user_name),t.append("email",e.value.email),t.append("first_name",e.value.first_name),t.append("last_name",e.value.last_name),t.append("phone_number",e.value.phone_number),this.selecteFile&&t.append("file",this.selecteFile),this.authService.editProfile(t).subscribe(e=>{this.showLoader=!1,e.success?(this.getProfile(),this.router.navigateByUrl("/profile")):e.error.map(t=>{console.log(t),t.hasOwnProperty("email")?this.formErrors.email=t.email:this.formErrors.apierror="* "+e.error})},e=>{this.showLoader=!1,this.formErrors.apierror="* Server Error"})}}toogleAddress(){document.getElementById("useraddress").click(),this.addressForm.reset(),this.showLoaderr=!1,this.showLoader=!1}editObject(e){this.isEditing=!0,this.editId=e.id,e&&(this.toogleAddress(),this.addressForm.patchValue({street_address:e.street_address,state:e.state,phone_number:e.phone_number,pincode:e.pincode,taluk:e.taluk,district:e.district,city:e.city,name:e.name,dial_code:e.dial_code,country:e.country}))}submitAddressForm(e){this.addForm.valid&&(this.showLoaderr=!0,this.isEditing?this.commonService.editAddress(this.editId,e.value).subscribe(e=>{this.showLoaderr=!1,e.success?(this.isEditing=!1,this.editId=null,this.toogleAddress(),this.getUseraddress()):this.showLoaderr=!1}):this.commonService.addAddress(e.value).subscribe(e=>{this.showLoaderr=!1,e.success?(this.toogleAddress(),this.getUseraddress()):this.showLoaderr=!1}))}getUseraddress(){this.commonService.getAddressList({}).subscribe(e=>{e.success&&(this.addressList=e.data)})}deleteObject(e){swal.fire({title:c.a.delete_header_text,text:c.a.delete_smalll_text,icon:c.a.delete_dialogue_type,showCancelButton:!0,confirmButtonText:c.a.delete_confirm_button,cancelButtonText:c.a.delete_cancel_button}).then(t=>{t.value&&this.commonService.deleteAddress(e.id).subscribe(e=>{e.success&&this.getUseraddress()})}).catch(swal.noop)}setDefaultAddress(e){e&&this.commonService.setDefaultAddress(e).subscribe(e=>{e.success&&(this.getUseraddress(),this.getProfile())})}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(s.e),l.Mb(n.b),l.Mb(d.a),l.Mb(b.a),l.Mb(u.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-edit-profile"]],decls:132,vars:35,consts:[[1,"content"],[1,"page-content","container-fluid"],[1,"card","m-3","card-tabs","strache-card"],["role","form",3,"formGroup","ngSubmit"],[1,"card-body","p-25","p-l-30","p-r-30"],[1,"d-flex"],[1,"left-form-content","m-l-20","m-r-40"],[1,"clearfix"],["data-provides","fileinput",1,"fileinput","text-center","fileinput-new"],[1,"btn-file","mt-3"],[1,"thumbnail","fileinput-new","rounded-circle",2,"width","200px","height","200px"],[2,"width","200px","height","200px",3,"src","alt"],[1,"fileinput-new","btn","btn-secondary","btn-sm","btn-file","mt-3"],["accept","image/x-png,image/jpeg","type","file","file-model","myFile",3,"change"],[1,"fileinput-preview","fileinput-exists","thumbnail","rounded-circle",2,"width","200px","height","200px"],[1,"text-center"],["data-dismiss","fileinput",1,"btn","btn-link","btn-sm","fileinput-exists","mt-3",3,"click"],[1,"clearfix","mt-3"],[1,"upload-img-label","text-muted","font-size-12"],[1,"row","flex"],[1,"col-12",2,"margin-left","50px"],[1,"form-row","pl-5","pr-5"],[1,"col-sm-6"],[1,"form-group"],[1,"control-label"],["type","text",1,"form-control",3,"formControl"],[1,"form-group",3,"ngClass"],["class","help-block",3,"innerHTML",4,"ngIf"],["type","text","number","",1,"form-control",3,"formControl"],[1,"card-footer","text-right"],[1,"btn-list"],["type","reset",1,"btn","btn-outline-secondary","mr-2","btn-rounded",3,"routerLink"],[1,"fa","fa-times"],["type","submit",1,"btn","btn-outline-success","btn-rounded",3,"disabled"],["class","fa fa-check",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"card","m-3","card-tabs","strache-card","p-5"],["id","useraddress","type","button","data-toggle","collapse","data-target","#collapseAddress","aria-expanded","false","aria-controls","collapseAddress",1,"badge","shadow","badge-pill","badge-primary"],["id","collapseAddress",1,"collapse","m-5","shadow-lg"],[1,"card","card-body"],[1,"form-row"],["type","text","placeholder","home/office address ",1,"form-control",3,"formControl","change"],["bindLabel","name","bindValue","code","placeholder","-- Select a country --",3,"formControl","items","change"],["type","number","number","",1,"form-control",3,"formControl","change"],[1,"input-group"],[1,"input-group-addon"],["number","","type","text",1,"form-control",3,"formControl"],["bindLabel","label","bindValue","label","placeholder","-- Select City --",3,"formControl","items","change"],[1,"col-sm-12"],["placeholder","Enter address",1,"form-control",3,"formControl"],["type","reset",1,"btn","btn-outline-secondary","mr-2","btn-rounded",3,"click"],[1,"card-columns","mt-3"],[4,"ngFor","ngForOf"],[1,"help-block",3,"innerHTML"],[1,"fa","fa-check"],[1,"fa","fa-spinner","fa-spin"],[1,"card","shadow-sm","p-3","mb-5","bg-white","rounded",3,"ngClass"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"text-muted"],[1,"row","mt-2"],["class","col-4",3,"click",4,"ngIf"],[1,"col-4",3,"click"],[1,"card-text","text-right","text-muted"],["aria-hidden","true",1,"fa","fa-edit"],[1,"card-text","text-left","text-muted"],["aria-hidden","true",1,"fa","fa-address-card"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(e,t){1&e&&(l.Sb(0,"div",0),l.Sb(1,"section",1),l.Sb(2,"div",2),l.Sb(3,"form",3),l.ec("ngSubmit",(function(){return t.submitForm(t.addForm)})),l.Sb(4,"div",4),l.Sb(5,"div",5),l.Sb(6,"div",6),l.Sb(7,"div",7),l.Sb(8,"div",8),l.Sb(9,"div",9),l.Sb(10,"div",10),l.Nb(11,"img",11),l.Rb(),l.Nb(12,"div",7),l.Sb(13,"button",12),l.Ic(14," Browse Image "),l.Rb(),l.Sb(15,"input",13),l.ec("change",(function(e){return t.fileChangeEvent(e)})),l.Rb(),l.Nb(16,"div",14),l.Rb(),l.Sb(17,"div",15),l.Sb(18,"a",16),l.ec("click",(function(){return t.removeFile()})),l.Ic(19,"Remove"),l.Rb(),l.Rb(),l.Sb(20,"div",17),l.Sb(21,"p",18),l.Ic(22,"*Recommended Size: "),l.Nb(23,"br"),l.Ic(24,"Minimum 250 * 250"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(25,"div",19),l.Sb(26,"div",20),l.Sb(27,"div",21),l.Sb(28,"div",22),l.Sb(29,"div",23),l.Sb(30,"label",24),l.Ic(31,"User Name"),l.Rb(),l.Nb(32,"input",25),l.Rb(),l.Rb(),l.Sb(33,"div",22),l.Sb(34,"div",26),l.Sb(35,"label",24),l.Ic(36,"Email"),l.Rb(),l.Nb(37,"input",25),l.Gc(38,g,1,1,"span",27),l.Rb(),l.Rb(),l.Sb(39,"div",22),l.Sb(40,"div",23),l.Sb(41,"label",24),l.Ic(42,"First Name"),l.Rb(),l.Nb(43,"input",25),l.Rb(),l.Rb(),l.Sb(44,"div",22),l.Sb(45,"div",23),l.Sb(46,"label",24),l.Ic(47,"Last Name"),l.Rb(),l.Nb(48,"input",25),l.Rb(),l.Rb(),l.Sb(49,"div",22),l.Sb(50,"div",23),l.Sb(51,"label",24),l.Ic(52,"Phone Number"),l.Rb(),l.Nb(53,"input",28),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(54,"div",29),l.Sb(55,"div",30),l.Sb(56,"button",31),l.Nb(57,"i",32),l.Ic(58," Cancel"),l.Rb(),l.Sb(59,"button",33),l.Gc(60,S,1,0,"i",34),l.Gc(61,v,1,0,"i",35),l.Ic(62," Success"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(63,"div",36),l.Sb(64,"h1"),l.Sb(65,"span",37),l.Ic(66,"Add Address"),l.Rb(),l.Rb(),l.Nb(67,"hr"),l.Sb(68,"div",38),l.Sb(69,"div",39),l.Sb(70,"form",3),l.ec("ngSubmit",(function(){return t.submitAddressForm(t.addressForm)})),l.Sb(71,"div",40),l.Sb(72,"div",22),l.Sb(73,"div",23),l.Sb(74,"label",24),l.Ic(75,"Name "),l.Rb(),l.Sb(76,"input",41),l.ec("change",(function(e){return t.getpincode(e)})),l.Rb(),l.Rb(),l.Rb(),l.Sb(77,"div",22),l.Sb(78,"div",23),l.Sb(79,"label",24),l.Ic(80,"Country"),l.Rb(),l.Sb(81,"ng-select",42),l.ec("change",(function(e){return t.setDileCode(e)})),l.Rb(),l.Rb(),l.Rb(),l.Sb(82,"div",22),l.Sb(83,"div",23),l.Sb(84,"label",24),l.Ic(85,"Pincode"),l.Rb(),l.Sb(86,"input",43),l.ec("change",(function(e){return t.getpincode(e)})),l.Rb(),l.Rb(),l.Rb(),l.Sb(87,"div",22),l.Sb(88,"div",23),l.Sb(89,"label"),l.Ic(90,"Phone "),l.Rb(),l.Sb(91,"div",44),l.Sb(92,"span",45),l.Ic(93),l.Rb(),l.Nb(94,"input",46),l.Gc(95,R,1,1,"span",27),l.Rb(),l.Rb(),l.Rb(),l.Sb(96,"div",22),l.Sb(97,"div",23),l.Sb(98,"label",24),l.Ic(99,"State"),l.Rb(),l.Nb(100,"input",25),l.Rb(),l.Rb(),l.Sb(101,"div",22),l.Sb(102,"div",23),l.Sb(103,"label",24),l.Ic(104,"District"),l.Rb(),l.Nb(105,"input",25),l.Rb(),l.Rb(),l.Sb(106,"div",22),l.Sb(107,"div",23),l.Sb(108,"label",24),l.Ic(109,"Taluk"),l.Rb(),l.Nb(110,"input",25),l.Rb(),l.Rb(),l.Sb(111,"div",22),l.Sb(112,"div",23),l.Sb(113,"label",24),l.Ic(114,"City"),l.Rb(),l.Sb(115,"ng-select",47),l.ec("change",(function(e){return t.setaddress(e)})),l.Rb(),l.Rb(),l.Rb(),l.Sb(116,"div",48),l.Sb(117,"div",23),l.Sb(118,"label"),l.Ic(119,"Address"),l.Rb(),l.Nb(120,"textarea",49),l.Rb(),l.Rb(),l.Rb(),l.Sb(121,"div",29),l.Sb(122,"div",30),l.Sb(123,"button",50),l.ec("click",(function(){return t.toogleAddress()})),l.Nb(124,"i",32),l.Ic(125," Cancel"),l.Rb(),l.Sb(126,"button",33),l.Gc(127,_,1,0,"i",34),l.Gc(128,q,1,0,"i",35),l.Ic(129," Success"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(130,"div",51),l.Gc(131,I,17,6,"ng-container",52),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&e&&(l.zb(3),l.lc("formGroup",t.addForm),l.zb(8),l.lc("src",null!=t.currentUserDetail&&t.currentUserDetail.image?null==t.currentUserDetail?null:t.currentUserDetail.image:"assets/images/profile.jpeg",l.Bc)("alt",null!=t.currentUserDetail&&t.currentUserDetail.image?null==t.currentUserDetail?null:t.currentUserDetail.full_name:"No Image"),l.zb(21),l.lc("formControl",t.addForm.controls.user_name),l.zb(2),l.lc("ngClass",l.qc(32,F,t.formErrors.email)),l.zb(3),l.lc("formControl",t.addForm.controls.email),l.zb(1),l.lc("ngIf",t.formErrors.email),l.zb(5),l.lc("formControl",t.addForm.controls.first_name),l.zb(5),l.lc("formControl",t.addForm.controls.last_name),l.zb(5),l.lc("formControl",t.addForm.controls.phone_number),l.zb(3),l.lc("routerLink",l.pc(34,C)),l.zb(3),l.lc("disabled",t.showLoader),l.zb(1),l.lc("ngIf",!t.showLoader),l.zb(1),l.lc("ngIf",t.showLoader),l.zb(9),l.lc("formGroup",t.addressForm),l.zb(6),l.lc("formControl",t.addressForm.controls.name),l.zb(5),l.lc("formControl",t.addressForm.controls.country)("items",t.countryListArray),l.zb(5),l.lc("formControl",t.addressForm.controls.pincode),l.zb(7),l.Kc(" ",t.addressForm.value.dial_code?t.addressForm.value.dial_code:"+91"," "),l.zb(1),l.lc("formControl",t.addressForm.controls.phone_number),l.zb(1),l.lc("ngIf",t.formErrors.phone_number),l.zb(5),l.lc("formControl",t.addressForm.controls.state),l.zb(5),l.lc("formControl",t.addressForm.controls.district),l.zb(5),l.lc("formControl",t.addressForm.controls.taluk),l.zb(5),l.lc("formControl",t.addressForm.controls.city)("items",t.pincodeListArray),l.zb(5),l.lc("formControl",t.addressForm.controls.street_address),l.zb(6),l.lc("disabled",t.showLoader),l.zb(1),l.lc("ngIf",!t.showLoader),l.zb(1),l.lc("ngIf",t.showLoader),l.zb(3),l.lc("ngForOf",t.addressList))},directives:[n.s,n.j,m.a,n.d,n.a,n.i,n.c,h.a,i.k,i.m,p.a,s.f,f.a,n.n,i.l],encapsulation:2}),e})();var z=r("Eqhp");const N=[{path:"",component:x}];let A=(()=>{class e{}return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(t){return new(t||e)},providers:[b.a],imports:[[i.b,s.i.forChild(N),o.a,n.e,n.o,z.a,f.b]]}),e})()}}]);