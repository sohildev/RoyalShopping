function _classCallCheck(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(o,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}function _createClass(o,e,r){return e&&_defineProperties(o.prototype,e),r&&_defineProperties(o,r),o}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{lu3c:function(o,e,r){"use strict";r.r(e),r.d(e,"LoginModule",(function(){return S}));var n=r("ofXK"),i=r("3Pt+"),t=r("Lw2Y"),a=r("fXoL"),s=r("LWby"),c=r("tyNb"),b=r("6uu6"),u=r("8cFx"),l=r("AwSQ"),p=r("5eHb"),m=r("4ioC"),d=r("/SVk"),h=r("9LzP");function f(o,e){if(1&o&&a.Lb(0,"span",23),2&o){var r=a.ac(2);a.fc("innerHTML",r.formErrors.phone_number,a.tc)}}var g=function(o){return{"has-error":o}},v=function(o){return{"qt-loader qt-loader-mini qt-loader-left":o}};function y(o,e){if(1&o){var r=a.Rb();a.Qb(0,"div",3),a.Qb(1,"div",4),a.Qb(2,"div",5),a.Qb(3,"h3",6),a.Ac(4,"Login (get mobile no)"),a.Pb(),a.Qb(5,"p",7),a.Ac(6,"Hi! Please enter your login information below to send submissions as contacts."),a.Pb(),a.Qb(7,"p",8),a.Qb(8,"a",9),a.Yb("click",(function(){return a.sc(r),a.ac().changeLoginType("email")})),a.Ac(9,"Login with email?"),a.Pb(),a.Pb(),a.Qb(10,"form",10),a.Yb("ngSubmit",(function(){return a.sc(r),a.ac().submitForm()})),a.Qb(11,"div",11),a.Qb(12,"div",12),a.Qb(13,"label"),a.Ac(14,"Phone Number "),a.Qb(15,"span"),a.Ac(16,"*"),a.Pb(),a.Pb(),a.Qb(17,"div",13),a.Qb(18,"div",14),a.Qb(19,"span",15),a.Ac(20),a.Pb(),a.Lb(21,"input",16),a.Pb(),a.yc(22,f,1,1,"span",17),a.Pb(),a.Pb(),a.Qb(23,"div",18),a.Qb(24,"button",19),a.Ac(25,"Sign In"),a.Pb(),a.Qb(26,"label",20),a.Lb(27,"input",21),a.Qb(28,"span"),a.Ac(29,"Remember me"),a.Pb(),a.Pb(),a.Pb(),a.Qb(30,"a",22),a.Ac(31,"Lost your password?"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()}if(2&o){var n=a.ac();a.zb(10),a.fc("formGroup",n.loginForm),a.zb(8),a.fc("ngClass",a.jc(7,g,n.formErrors.phone_number)),a.zb(2),a.Bc(null!=n.currentCompany&&n.currentCompany.dial_code?null==n.currentCompany?null:n.currentCompany.dial_code:"+91"),a.zb(1),a.fc("formControl",n.loginForm.controls.phone_number),a.zb(1),a.fc("ngIf",n.formErrors.phone_number),a.zb(2),a.fc("ngClass",a.jc(9,v,n.showLoader))("disabled",n.showLoader)}}function P(o,e){if(1&o){var r=a.Rb();a.Qb(0,"div",3),a.Qb(1,"div",4),a.Qb(2,"div",5),a.Qb(3,"h3",6),a.Ac(4,"Verify otp"),a.Pb(),a.Qb(5,"form",24),a.Yb("ngSubmit",(function(){return a.sc(r),a.ac().submitOtpForm()})),a.Qb(6,"div",11),a.Qb(7,"div",12),a.Qb(8,"label"),a.Ac(9,"Enter OTP "),a.Qb(10,"span"),a.Ac(11,"*"),a.Pb(),a.Pb(),a.Lb(12,"input",25),a.Pb(),a.Qb(13,"div",18),a.Qb(14,"button",26),a.Ac(15," Sign In"),a.Pb(),a.Qb(16,"div",27),a.Qb(17,"a",28),a.Yb("click",(function(){return a.sc(r),a.ac().resendOTP()})),a.Ac(18,"Resend OTP?"),a.Pb(),a.Pb(),a.Pb(),a.Qb(19,"a",22),a.Ac(20,"Lost your password?"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()}if(2&o){var n=a.ac();a.zb(5),a.fc("formGroup",n.otpForm),a.zb(9),a.fc("ngClass",a.jc(3,v,n.showLoader))("disabled",n.showLoader)}}var _,Q=((_=function(){function o(e,r,n,t,s,c,b){_classCallCheck(this,o),this.router=e,this.config=r,this.activatedRoute=n,this.authService=t,this.fBuilder=s,this.toastrService=c,this.dataService=b,this.currentCompany=[],this.setLoginType=new a.n,this.formErrors={phone_number:null,otp:null,login_pin:null,apierror:null},this.phone_number=null,this.dial_code=null,this.company_id=null,this.showLoader=!1,this.loginPinType=1,this.loginForm=this.fBuilder.group({phone_number:[null,i.o.compose([i.o.required])]}),this.otpForm=this.fBuilder.group({otp:[null,i.o.compose([i.o.required])]}),this.pinForm=this.fBuilder.group({login_pin:[null,i.o.compose([i.o.required,i.o.minLength(4),i.o.maxLength(4)])]})}return _createClass(o,[{key:"ngOnInit",value:function(){this.currentCompany&&(this.dial_code=this.currentCompany.dial_code,this.company_id=this.currentCompany.company_id)}},{key:"changeLoginType",value:function(o){this.setLoginType.emit(o)}},{key:"resetForm",value:function(){t.a.resetForm(this.otpForm),t.a.resetForm(this.loginForm),this.formErrors.login_pin=null,this.formErrors.otp=null,this.formErrors.phone_number=null,this.formErrors.apierror=null}},{key:"submitForm",value:function(){var o=this;this.loginForm.valid&&(this.loginPinType=2,this.showLoader=!0,this.phone_number=this.loginForm.value.phone_number,this.authService.phonelogin({phone_number:this.phone_number,dial_code:this.dial_code,company_id:this.company_id}).subscribe((function(e){o.showLoader=!1,e.success?(o.resetForm(),e.data.verify_otp&&(o.loginPinType=2),e.data.login_pin&&(o.loginPinType=3)):o.formErrors.apierror="* "+e.error}),(function(e){o.formErrors.apierror="* "+e.error,o.showLoader=!1})))}},{key:"submitOtpForm",value:function(){var o=this;if(this.otpForm.valid){this.showLoader=!0;var e={phone_number:this.phone_number,dial_code:this.dial_code,company_id:this.company_id,otp:parseInt(this.otpForm.value.otp)};this.authService.otpverify(e).subscribe((function(e){o.showLoader=!1,e.success?(o.resetForm(),e.data.login_pin&&(o.loginPinType=4)):o.formErrors.apierror="* "+e.error}),(function(e){o.formErrors.apierror="* "+e.error,o.showLoader=!1}))}}},{key:"resendOTP",value:function(){var o=this;this.showLoader=!0,this.authService.resendotp({phone_number:this.phone_number,dial_code:this.dial_code,company_id:this.company_id}).subscribe((function(e){o.showLoader=!1,e.success?(o.resetForm(),o.toastrService.success("OTP sent successfully","")):o.formErrors.apierror="* "+e.error}),(function(e){o.formErrors.apierror="* "+e.error,o.showLoader=!1}))}}]),o}()).\u0275fac=function(o){return new(o||_)(a.Kb(c.e),a.Kb(s.b),a.Kb(c.a),a.Kb(b.a),a.Kb(i.b),a.Kb(p.b),a.Kb(l.a))},_.\u0275cmp=a.Eb({type:_,selectors:[["app-pin"]],inputs:{currentCompany:"currentCompany"},outputs:{setLoginType:"setLoginType"},decls:4,vars:2,consts:[[1,"my_account_area","pt--80","pb--55","bg--white"],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col-lg-6","col-12"],[1,"my__account__wrapper"],[1,"account__title"],[1,"text-center","text-muted"],[1,"text-center","m-b-20"],[1,"",2,"color","#399AF2",3,"click"],[1,"sign-in-form",3,"formGroup","ngSubmit"],[1,"account__form"],[1,"input__box"],[1,"form-group"],[1,"input-group",3,"ngClass"],[1,"input-group-addon"],["number","","type","text","placeholder","Enter Phone Number",1,"form-control",3,"formControl"],["class","help-block",3,"innerHTML",4,"ngIf"],[1,"form__btn"],[3,"ngClass","disabled"],[1,"label-for-checkbox"],["id","rememberme","name","rememberme","value","forever","type","checkbox",1,"input-checkbox"],["routerLink","/forgot-password",1,"forget_pass"],[1,"help-block",3,"innerHTML"],[3,"formGroup","ngSubmit"],["type","text"],["type","submit",3,"ngClass","disabled"],[1,"checkbox","m-b-10","m-t-20"],[1,"float-right","m-b-20",3,"click"]],template:function(o,e){1&o&&(a.Qb(0,"section",0),a.Qb(1,"div",1),a.yc(2,y,32,11,"div",2),a.yc(3,P,21,5,"div",2),a.Pb(),a.Pb()),2&o&&(a.zb(2),a.fc("ngIf",1==e.loginPinType),a.zb(1),a.fc("ngIf",2==e.loginPinType))},directives:[n.l,i.p,i.i,m.a,i.d,n.j,i.a,d.a,i.h,i.c,h.a,c.g],encapsulation:2}),_);function w(o,e){if(1&o){var r=a.Rb();a.Qb(0,"app-pin",2),a.Yb("setLoginType",(function(o){return a.sc(r),a.ac().getLoginType(o)})),a.Pb()}if(2&o){var n=a.ac();a.fc("currentCompany",n.currentCompany)}}var L=function(o){return{"qt-loader qt-loader-mini qt-loader-left":o}};function C(o,e){if(1&o){var r=a.Rb();a.Qb(0,"section",3),a.Qb(1,"div",4),a.Qb(2,"div",5),a.Qb(3,"div",6),a.Qb(4,"div",7),a.Qb(5,"h3",8),a.Ac(6,"Login"),a.Pb(),a.Qb(7,"p",9),a.Qb(8,"a",10),a.Yb("click",(function(){return a.sc(r),a.ac().changeLoginType("phone")})),a.Ac(9,"Login with phone?"),a.Pb(),a.Pb(),a.Qb(10,"form",11),a.Yb("ngSubmit",(function(){return a.sc(r),a.ac().submitForm()})),a.Qb(11,"div",12),a.Qb(12,"div",13),a.Qb(13,"label"),a.Ac(14,"Email Address "),a.Qb(15,"span"),a.Ac(16,"*"),a.Pb(),a.Pb(),a.Lb(17,"input",14),a.Pb(),a.Qb(18,"div",13),a.Qb(19,"div",15),a.Qb(20,"label"),a.Ac(21,"Password"),a.Qb(22,"span"),a.Ac(23,"*"),a.Pb(),a.Pb(),a.Lb(24,"input",16),a.Pb(),a.Pb(),a.Qb(25,"div",17),a.Qb(26,"button",18),a.Ac(27," Sign In "),a.Pb(),a.Qb(28,"label",19),a.Lb(29,"input",20),a.Qb(30,"span"),a.Ac(31,"Remember me"),a.Pb(),a.Pb(),a.Pb(),a.Qb(32,"a",21),a.Ac(33,"Lost your password?"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(34,"div",6),a.Qb(35,"div",7),a.Qb(36,"h3",8),a.Ac(37,"Register"),a.Pb(),a.Qb(38,"form",22),a.Yb("ngSubmit",(function(){return a.sc(r),a.ac().submitRegisterForm()})),a.Qb(39,"div",12),a.Qb(40,"div",13),a.Qb(41,"label"),a.Ac(42,"Usename "),a.Qb(43,"span"),a.Ac(44,"*"),a.Pb(),a.Pb(),a.Lb(45,"input",23),a.Pb(),a.Qb(46,"div",13),a.Qb(47,"label"),a.Ac(48,"Email address "),a.Qb(49,"span"),a.Ac(50,"*"),a.Pb(),a.Pb(),a.Lb(51,"input",14),a.Pb(),a.Qb(52,"div",13),a.Qb(53,"label"),a.Ac(54,"Password"),a.Qb(55,"span"),a.Ac(56,"*"),a.Pb(),a.Pb(),a.Lb(57,"input",16),a.Pb(),a.Qb(58,"div",17),a.Qb(59,"button",18),a.Ac(60," Register "),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()}if(2&o){var n=a.ac();a.zb(10),a.fc("formGroup",n.loginForm),a.zb(7),a.fc("formControl",n.loginForm.controls.email),a.zb(7),a.fc("formControl",n.loginForm.controls.password),a.zb(2),a.fc("ngClass",a.jc(11,L,n.showLoader))("disabled",n.showLoader),a.zb(12),a.fc("formGroup",n.RegisterForm),a.zb(7),a.fc("formControl",n.RegisterForm.controls.name),a.zb(6),a.fc("formControl",n.RegisterForm.controls.email),a.zb(6),a.fc("formControl",n.RegisterForm.controls.password),a.zb(2),a.fc("ngClass",a.jc(13,L,n.showLoader))("disabled",n.showLoader)}}var F,A,k=((F=function(){function o(e,r,n,a,s,c,b){_classCallCheck(this,o),this.config=e,this.router=r,this.activatedRoute=n,this.authService=a,this.commonService=s,this.fBuilder=c,this.dataService=b,this.formErrors={apierror:null},this.showLoader=!1,this.currentCompany=null,this.loginType="email",this.config.config={showHeader:!1},this.loginForm=this.fBuilder.group({email:[null,i.o.compose([i.o.required,t.f])],password:[null,i.o.compose([i.o.required])]}),this.RegisterForm=this.fBuilder.group({email:[null,i.o.compose([i.o.required,t.f])],password:[null,i.o.compose([i.o.required])],name:[null,i.o.compose([i.o.required])]})}return _createClass(o,[{key:"ngOnInit",value:function(){}},{key:"changeLoginType",value:function(o){this.loginType=o}},{key:"getLoginType",value:function(o){this.loginType=o}},{key:"submitForm",value:function(){var o=this;if(this.loginForm.valid){this.showLoader=!0;var e={email:this.loginForm.value.email.toLowerCase(),password:this.loginForm.value.password,remember_me:this.loginForm.value.remember_me};this.authService.login(e).subscribe((function(e){if(console.log("In success",e),o.showLoader=!1,e.success){t.a.resetForm(o.loginForm),o.dataService.setAuth(e.data),o.config.config={showHeader:!0},o.activatedRoute.snapshot.queryParamMap.get("next");var r=o.activatedRoute.snapshot.queryParamMap.get("next")?o.activatedRoute.snapshot.queryParamMap.get("next"):"/home";o.router.navigateByUrl(r)}else o.formErrors.apierror="* "+e.error}),(function(e){o.formErrors.apierror="* "+e.error,o.showLoader=!1}))}}},{key:"submitRegisterForm",value:function(){var o=this;if(this.RegisterForm.valid){this.showLoader=!0;var e={email:this.RegisterForm.value.email.toLowerCase(),password:this.RegisterForm.value.password,name:this.RegisterForm.value.name,type:{value:0,label:"normal_user"}};this.authService.register(e).subscribe((function(e){if(console.log("In success",e),o.showLoader=!1,e.success){t.a.resetForm(o.RegisterForm),o.dataService.setAuth(e.data),o.config.config={showHeader:!0},o.activatedRoute.snapshot.queryParamMap.get("next");var r=o.activatedRoute.snapshot.queryParamMap.get("next")?o.activatedRoute.snapshot.queryParamMap.get("next"):"/home";o.router.navigateByUrl(r)}else o.formErrors.apierror="* "+e.error}),(function(e){o.formErrors.apierror="* "+e.error,o.showLoader=!1}))}}}]),o}()).\u0275fac=function(o){return new(o||F)(a.Kb(s.b),a.Kb(c.e),a.Kb(c.a),a.Kb(b.a),a.Kb(u.a),a.Kb(i.b),a.Kb(l.a))},F.\u0275cmp=a.Eb({type:F,selectors:[["app-login"]],decls:2,vars:2,consts:[[3,"currentCompany","setLoginType",4,"ngIf"],["class","my_account_area pt--80 pb--55 bg--white",4,"ngIf"],[3,"currentCompany","setLoginType"],[1,"my_account_area","pt--80","pb--55","bg--white"],[1,"container"],[1,"row"],[1,"col-lg-6","col-12"],[1,"my__account__wrapper"],[1,"account__title"],[1,"text-center","m-b-20"],[1,"",2,"color","#399AF2",3,"click"],[1,"sign-in-form",3,"formGroup","ngSubmit"],[1,"account__form"],[1,"input__box"],["type","text","autofocus","","placeholder","Email ID",1,"form-control","input-lg",3,"formControl"],[1,"form-group"],["type","password","placeholder","Password",1,"form-control","input-lg",3,"formControl"],[1,"form__btn"],["type","submit",3,"ngClass","disabled"],[1,"label-for-checkbox"],["id","rememberme","name","rememberme","value","forever","type","checkbox",1,"input-checkbox"],["routerLink","/forgot-password",1,"forget_pass"],[3,"formGroup","ngSubmit"],["type","text","autofocus","","placeholder","Username",1,"form-control","input-lg",3,"formControl"]],template:function(o,e){1&o&&(a.yc(0,w,1,1,"app-pin",0),a.yc(1,C,61,15,"section",1)),2&o&&(a.fc("ngIf","phone"==e.loginType),a.zb(1),a.fc("ngIf","email"==e.loginType))},directives:[n.l,Q,i.p,i.i,m.a,i.d,i.a,i.h,i.c,h.a,n.j,c.g],encapsulation:2}),F),T=r("Eqhp"),R=r("PCNd"),E=[{path:"",component:k,data:{title:"login"}},{path:"pin",component:Q,data:{title:"login"}}],S=((A=function o(){_classCallCheck(this,o)}).\u0275mod=a.Ib({type:A}),A.\u0275inj=a.Hb({factory:function(o){return new(o||A)},providers:[b.a],imports:[[n.b,i.e,i.m,T.a,R.a,c.h.forChild(E)]]}),A)}}]);