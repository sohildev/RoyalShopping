(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{lu3c:function(r,o,e){"use strict";e.r(o),e.d(o,"LoginModule",(function(){return E}));var i=e("ofXK"),t=e("3Pt+"),n=e("Lw2Y"),s=e("fXoL"),c=e("LWby"),a=e("tyNb"),b=e("6uu6"),l=e("8cFx"),m=e("AwSQ"),u=e("5eHb"),p=e("4ioC"),h=e("/SVk"),d=e("9LzP");function g(r,o){if(1&r&&s.Nb(0,"span",23),2&r){const r=s.gc(2);s.lc("innerHTML",r.formErrors.phone_number,s.Ac)}}const f=function(r){return{"has-error":r}},S=function(r){return{"qt-loader qt-loader-mini qt-loader-left":r}};function R(r,o){if(1&r){const r=s.Tb();s.Sb(0,"div",3),s.Sb(1,"div",4),s.Sb(2,"div",5),s.Sb(3,"h3",6),s.Ic(4,"Login (get mobile no)"),s.Rb(),s.Sb(5,"p",7),s.Ic(6,"Hi! Please enter your login information below to send submissions as contacts."),s.Rb(),s.Sb(7,"p",8),s.Sb(8,"a",9),s.ec("click",(function(){return s.zc(r),s.gc().changeLoginType("email")})),s.Ic(9,"Login with email?"),s.Rb(),s.Rb(),s.Sb(10,"form",10),s.ec("ngSubmit",(function(){return s.zc(r),s.gc().submitForm()})),s.Sb(11,"div",11),s.Sb(12,"div",12),s.Sb(13,"label"),s.Ic(14,"Phone Number "),s.Sb(15,"span"),s.Ic(16,"*"),s.Rb(),s.Rb(),s.Sb(17,"div",13),s.Sb(18,"div",14),s.Sb(19,"span",15),s.Ic(20),s.Rb(),s.Nb(21,"input",16),s.Rb(),s.Gc(22,g,1,1,"span",17),s.Rb(),s.Rb(),s.Sb(23,"div",18),s.Sb(24,"button",19),s.Ic(25,"Sign In"),s.Rb(),s.Sb(26,"label",20),s.Nb(27,"input",21),s.Sb(28,"span"),s.Ic(29,"Remember me"),s.Rb(),s.Rb(),s.Rb(),s.Sb(30,"a",22),s.Ic(31,"Lost your password?"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&r){const r=s.gc();s.zb(10),s.lc("formGroup",r.loginForm),s.zb(8),s.lc("ngClass",s.qc(7,f,r.formErrors.phone_number)),s.zb(2),s.Jc(null!=r.currentCompany&&r.currentCompany.dial_code?null==r.currentCompany?null:r.currentCompany.dial_code:"+91"),s.zb(1),s.lc("formControl",r.loginForm.controls.phone_number),s.zb(1),s.lc("ngIf",r.formErrors.phone_number),s.zb(2),s.lc("ngClass",s.qc(9,S,r.showLoader))("disabled",r.showLoader)}}function v(r,o){if(1&r){const r=s.Tb();s.Sb(0,"div",3),s.Sb(1,"div",4),s.Sb(2,"div",5),s.Sb(3,"h3",6),s.Ic(4,"Verify otp"),s.Rb(),s.Sb(5,"form",24),s.ec("ngSubmit",(function(){return s.zc(r),s.gc().submitOtpForm()})),s.Sb(6,"div",11),s.Sb(7,"div",12),s.Sb(8,"label"),s.Ic(9,"Enter OTP "),s.Sb(10,"span"),s.Ic(11,"*"),s.Rb(),s.Rb(),s.Nb(12,"input",25),s.Rb(),s.Sb(13,"div",18),s.Sb(14,"button",26),s.Ic(15," Sign In"),s.Rb(),s.Sb(16,"div",27),s.Sb(17,"a",28),s.ec("click",(function(){return s.zc(r),s.gc().resendOTP()})),s.Ic(18,"Resend OTP?"),s.Rb(),s.Rb(),s.Rb(),s.Sb(19,"a",22),s.Ic(20,"Lost your password?"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&r){const r=s.gc();s.zb(5),s.lc("formGroup",r.otpForm),s.zb(9),s.lc("ngClass",s.qc(3,S,r.showLoader))("disabled",r.showLoader)}}let y=(()=>{class r{constructor(r,o,e,i,n,c,a){this.router=r,this.config=o,this.activatedRoute=e,this.authService=i,this.fBuilder=n,this.toastrService=c,this.dataService=a,this.currentCompany=[],this.setLoginType=new s.n,this.formErrors={phone_number:null,otp:null,login_pin:null,apierror:null},this.phone_number=null,this.dial_code=null,this.company_id=null,this.showLoader=!1,this.loginPinType=1,this.loginForm=this.fBuilder.group({phone_number:[null,t.q.compose([t.q.required])]}),this.otpForm=this.fBuilder.group({otp:[null,t.q.compose([t.q.required])]}),this.pinForm=this.fBuilder.group({login_pin:[null,t.q.compose([t.q.required,t.q.minLength(4),t.q.maxLength(4)])]})}ngOnInit(){this.currentCompany&&(this.dial_code=this.currentCompany.dial_code,this.company_id=this.currentCompany.company_id)}changeLoginType(r){this.setLoginType.emit(r)}resetForm(){n.a.resetForm(this.otpForm),n.a.resetForm(this.loginForm),this.formErrors.login_pin=null,this.formErrors.otp=null,this.formErrors.phone_number=null,this.formErrors.apierror=null}submitForm(){this.loginForm.valid&&(this.loginPinType=2,this.showLoader=!0,this.phone_number=this.loginForm.value.phone_number,this.authService.phonelogin({phone_number:this.phone_number,dial_code:this.dial_code,company_id:this.company_id}).subscribe(r=>{this.showLoader=!1,r.success?(this.resetForm(),r.data.verify_otp&&(this.loginPinType=2),r.data.login_pin&&(this.loginPinType=3)):this.formErrors.apierror="* "+r.error},r=>{this.formErrors.apierror="* "+r.error,this.showLoader=!1}))}submitOtpForm(){if(this.otpForm.valid){this.showLoader=!0;const r={phone_number:this.phone_number,dial_code:this.dial_code,company_id:this.company_id,otp:parseInt(this.otpForm.value.otp)};this.authService.otpverify(r).subscribe(r=>{this.showLoader=!1,r.success?(this.resetForm(),r.data.login_pin&&(this.loginPinType=4)):this.formErrors.apierror="* "+r.error},r=>{this.formErrors.apierror="* "+r.error,this.showLoader=!1})}}resendOTP(){this.showLoader=!0,this.authService.resendotp({phone_number:this.phone_number,dial_code:this.dial_code,company_id:this.company_id}).subscribe(r=>{this.showLoader=!1,r.success?(this.resetForm(),this.toastrService.success("OTP sent successfully","")):this.formErrors.apierror="* "+r.error},r=>{this.formErrors.apierror="* "+r.error,this.showLoader=!1})}}return r.\u0275fac=function(o){return new(o||r)(s.Mb(a.e),s.Mb(c.b),s.Mb(a.a),s.Mb(b.a),s.Mb(t.b),s.Mb(u.b),s.Mb(m.a))},r.\u0275cmp=s.Gb({type:r,selectors:[["app-pin"]],inputs:{currentCompany:"currentCompany"},outputs:{setLoginType:"setLoginType"},decls:4,vars:2,consts:[[1,"my_account_area","pt--80","pb--55","bg--white"],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col-lg-6","col-12"],[1,"my__account__wrapper"],[1,"account__title"],[1,"text-center","text-muted"],[1,"text-center","m-b-20"],[1,"",2,"color","#399AF2",3,"click"],[1,"sign-in-form",3,"formGroup","ngSubmit"],[1,"account__form"],[1,"input__box"],[1,"form-group"],[1,"input-group",3,"ngClass"],[1,"input-group-addon"],["number","","type","text","placeholder","Enter Phone Number",1,"form-control",3,"formControl"],["class","help-block",3,"innerHTML",4,"ngIf"],[1,"form__btn"],[3,"ngClass","disabled"],[1,"label-for-checkbox"],["id","rememberme","name","rememberme","value","forever","type","checkbox",1,"input-checkbox"],["routerLink","/forgot-password",1,"forget_pass"],[1,"help-block",3,"innerHTML"],[3,"formGroup","ngSubmit"],["type","text"],["type","submit",3,"ngClass","disabled"],[1,"checkbox","m-b-10","m-t-20"],[1,"float-right","m-b-20",3,"click"]],template:function(r,o){1&r&&(s.Sb(0,"section",0),s.Sb(1,"div",1),s.Gc(2,R,32,11,"div",2),s.Gc(3,v,21,5,"div",2),s.Rb(),s.Rb()),2&r&&(s.zb(2),s.lc("ngIf",1==o.loginPinType),s.zb(1),s.lc("ngIf",2==o.loginPinType))},directives:[i.m,t.s,t.j,p.a,t.d,i.k,t.a,h.a,t.i,t.c,d.a,a.h],encapsulation:2}),r})();function _(r,o){if(1&r){const r=s.Tb();s.Sb(0,"app-pin",2),s.ec("setLoginType",(function(o){return s.zc(r),s.gc().getLoginType(o)})),s.Rb()}if(2&r){const r=s.gc();s.lc("currentCompany",r.currentCompany)}}function w(r,o){if(1&r){const r=s.Tb();s.Sb(0,"div",25),s.Sb(1,"a",26),s.ec("click",(function(){return s.zc(r),s.gc(2).removeError()})),s.Ic(2,"\xd7"),s.Rb(),s.Nb(3,"span",27),s.Rb()}if(2&r){const r=s.gc(2);s.zb(3),s.lc("innerHTML",r.formErrors.apierror,s.Ac)}}function L(r,o){if(1&r){const r=s.Tb();s.Sb(0,"div",25),s.Sb(1,"a",26),s.ec("click",(function(){return s.zc(r),s.gc(2).removeError()})),s.Ic(2,"\xd7"),s.Rb(),s.Nb(3,"span",27),s.Rb()}if(2&r){const r=s.gc(2);s.zb(3),s.lc("innerHTML",r.formError.apierror,s.Ac)}}const I=function(r){return{"fa fa-spinner fa-spin":r}};function F(r,o){if(1&r){const r=s.Tb();s.Sb(0,"section",3),s.Sb(1,"div",4),s.Sb(2,"div",5),s.Sb(3,"div",6),s.Sb(4,"div",7),s.Sb(5,"h3",8),s.Ic(6,"Login"),s.Rb(),s.Sb(7,"p",9),s.Sb(8,"a",10),s.ec("click",(function(){return s.zc(r),s.gc().changeLoginType("phone")})),s.Ic(9,"Login with phone?"),s.Rb(),s.Rb(),s.Sb(10,"form",11),s.ec("ngSubmit",(function(){return s.zc(r),s.gc().submitForm()})),s.Sb(11,"div",12),s.Gc(12,w,4,1,"div",13),s.Sb(13,"div",14),s.Sb(14,"label"),s.Ic(15,"Email Address "),s.Sb(16,"span"),s.Ic(17,"*"),s.Rb(),s.Rb(),s.Nb(18,"input",15),s.Rb(),s.Sb(19,"div",14),s.Sb(20,"div",16),s.Sb(21,"label"),s.Ic(22,"Password"),s.Sb(23,"span"),s.Ic(24,"*"),s.Rb(),s.Rb(),s.Nb(25,"input",17),s.Rb(),s.Rb(),s.Sb(26,"div",18),s.Sb(27,"button",19),s.Ic(28," Sign In "),s.Rb(),s.Sb(29,"label",20),s.Nb(30,"input",21),s.Sb(31,"span"),s.Ic(32,"Remember me"),s.Rb(),s.Rb(),s.Rb(),s.Sb(33,"a",22),s.Ic(34,"Lost your password?"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(35,"div",6),s.Sb(36,"div",7),s.Sb(37,"h3",8),s.Ic(38,"Register"),s.Rb(),s.Sb(39,"form",23),s.ec("ngSubmit",(function(){return s.zc(r),s.gc().submitRegisterForm()})),s.Sb(40,"div",12),s.Gc(41,L,4,1,"div",13),s.Sb(42,"div",14),s.Sb(43,"label"),s.Ic(44,"Usename "),s.Sb(45,"span"),s.Ic(46,"*"),s.Rb(),s.Rb(),s.Nb(47,"input",24),s.Rb(),s.Sb(48,"div",14),s.Sb(49,"label"),s.Ic(50,"Email address "),s.Sb(51,"span"),s.Ic(52,"*"),s.Rb(),s.Rb(),s.Nb(53,"input",15),s.Rb(),s.Sb(54,"div",14),s.Sb(55,"label"),s.Ic(56,"Password"),s.Sb(57,"span"),s.Ic(58,"*"),s.Rb(),s.Rb(),s.Nb(59,"input",17),s.Rb(),s.Sb(60,"div",18),s.Sb(61,"button",19),s.Ic(62," Register "),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&r){const r=s.gc();s.zb(10),s.lc("formGroup",r.loginForm),s.zb(2),s.lc("ngIf",r.formErrors.apierror),s.zb(6),s.lc("formControl",r.loginForm.controls.email),s.zb(7),s.lc("formControl",r.loginForm.controls.password),s.zb(2),s.lc("ngClass",s.qc(13,I,r.showLoader))("disabled",r.showLoader),s.zb(12),s.lc("formGroup",r.RegisterForm),s.zb(2),s.lc("ngIf",r.formError.apierror),s.zb(6),s.lc("formControl",r.RegisterForm.controls.name),s.zb(6),s.lc("formControl",r.RegisterForm.controls.email),s.zb(6),s.lc("formControl",r.RegisterForm.controls.password),s.zb(2),s.lc("ngClass",s.qc(15,I,r.showLoaderr))("disabled",r.showLoaderr)}}let T=(()=>{class r{constructor(r,o,e,i,s,c,a){this.config=r,this.router=o,this.activatedRoute=e,this.authService=i,this.commonService=s,this.fBuilder=c,this.dataService=a,this.formErrors={apierror:null},this.formError={apierror:null},this.showLoader=!1,this.showLoaderr=!1,this.currentCompany=null,this.loginType="email",this.config.config={showHeader:!1},this.loginForm=this.fBuilder.group({email:[null,t.q.compose([t.q.required,n.f])],password:[null,t.q.compose([t.q.required])]}),this.RegisterForm=this.fBuilder.group({email:[null,t.q.compose([t.q.required,n.f])],password:[null,t.q.compose([t.q.required])],name:[null,t.q.compose([t.q.required])]})}ngOnInit(){}changeLoginType(r){this.loginType=r}getLoginType(r){this.loginType=r}removeError(){this.formErrors.apierror=null,this.formError.apierror=null}submitForm(){if(this.loginForm.valid){this.showLoader=!0;const r={email:this.loginForm.value.email.toLowerCase(),password:this.loginForm.value.password,remember_me:this.loginForm.value.remember_me};this.authService.login(r).subscribe(r=>{if(console.log("In success",r),this.showLoader=!1,r.success){n.a.resetForm(this.loginForm),this.dataService.setAuth(r.data),this.config.config={showHeader:!0},this.activatedRoute.snapshot.queryParamMap.get("next");const o=this.activatedRoute.snapshot.queryParamMap.get("next")?this.activatedRoute.snapshot.queryParamMap.get("next"):"/home";this.router.navigateByUrl(o)}else this.formErrors.apierror="* "+r.error},r=>{console.log("In error",r),this.formErrors.apierror="* "+r.error.error,this.showLoader=!1})}}submitRegisterForm(){if(this.RegisterForm.valid){this.showLoaderr=!0;const r={email:this.RegisterForm.value.email.toLowerCase(),password:this.RegisterForm.value.password,name:this.RegisterForm.value.name,type:{value:0,label:"normal_user"}};this.authService.register(r).subscribe(r=>{if(console.log("In success",r),this.showLoaderr=!1,r.success){n.a.resetForm(this.RegisterForm),this.dataService.setAuth(r.data),this.config.config={showHeader:!0},this.activatedRoute.snapshot.queryParamMap.get("next");const o=this.activatedRoute.snapshot.queryParamMap.get("next")?this.activatedRoute.snapshot.queryParamMap.get("next"):"/home";this.router.navigateByUrl(o)}else this.formError.apierror="* "+r.error},r=>{this.formError.apierror="* "+r.error.error,this.showLoaderr=!1})}}}return r.\u0275fac=function(o){return new(o||r)(s.Mb(c.b),s.Mb(a.e),s.Mb(a.a),s.Mb(b.a),s.Mb(l.a),s.Mb(t.b),s.Mb(m.a))},r.\u0275cmp=s.Gb({type:r,selectors:[["app-login"]],decls:2,vars:2,consts:[[3,"currentCompany","setLoginType",4,"ngIf"],["class","my_account_area pt--80 pb--55 bg--white",4,"ngIf"],[3,"currentCompany","setLoginType"],[1,"my_account_area","pt--80","pb--55","bg--white"],[1,"container"],[1,"row"],[1,"col-lg-6","col-12"],[1,"my__account__wrapper"],[1,"account__title"],[1,"text-center","m-b-20"],[1,"",2,"color","#399AF2",3,"click"],[1,"sign-in-form","shadow-lg",3,"formGroup","ngSubmit"],[1,"account__form"],["class","alert alert-danger alert-dismissible",4,"ngIf"],[1,"input__box"],["type","text","autofocus","","placeholder","Email ID",1,"form-control","input-lg",3,"formControl"],[1,"form-group"],["type","password","placeholder","Password",1,"form-control","input-lg",3,"formControl"],[1,"form__btn"],["type","submit",3,"ngClass","disabled"],[1,"label-for-checkbox"],["id","rememberme","name","rememberme","value","forever","type","checkbox",1,"input-checkbox"],["routerLink","/forgot-password",1,"forget_pass"],[1,"shadow-none",3,"formGroup","ngSubmit"],["type","text","autofocus","","placeholder","Username",1,"form-control","input-lg",3,"formControl"],[1,"alert","alert-danger","alert-dismissible"],["data-dismiss","alert","aria-label","close",1,"close",3,"click"],[1,"h6",3,"innerHTML"]],template:function(r,o){1&r&&(s.Gc(0,_,1,1,"app-pin",0),s.Gc(1,F,63,17,"section",1)),2&r&&(s.lc("ngIf","phone"==o.loginType),s.zb(1),s.lc("ngIf","email"==o.loginType))},directives:[i.m,y,t.s,t.j,p.a,t.d,t.a,t.i,t.c,d.a,i.k,a.h],encapsulation:2}),r})();var q=e("Eqhp"),C=e("PCNd");const z=[{path:"",component:T,data:{title:"login"}},{path:"pin",component:y,data:{title:"login"}}];let E=(()=>{class r{}return r.\u0275mod=s.Kb({type:r}),r.\u0275inj=s.Jb({factory:function(o){return new(o||r)},providers:[b.a],imports:[[i.b,t.e,t.o,q.a,C.a,a.i.forChild(z)]]}),r})()}}]);