function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function _createClass(r,e,o){return e&&_defineProperties(r.prototype,e),o&&_defineProperties(r,o),r}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{lu3c:function(r,e,o){"use strict";o.r(e),o.d(e,"LoginModule",(function(){return M}));var n=o("ofXK"),i=o("3Pt+"),t=o("Lw2Y"),a=o("fXoL"),s=o("LWby"),c=o("tyNb"),l=o("6uu6"),b=o("8cFx"),u=o("AwSQ"),m=o("5eHb"),p=o("4ioC"),d=o("/SVk"),h=o("9LzP");function f(r,e){if(1&r&&a.Nb(0,"span",23),2&r){var o=a.gc(2);a.lc("innerHTML",o.formErrors.phone_number,a.Ac)}}var g=function(r){return{"has-error":r}},v=function(r){return{"qt-loader qt-loader-mini qt-loader-left":r}};function S(r,e){if(1&r){var o=a.Tb();a.Sb(0,"div",3),a.Sb(1,"div",4),a.Sb(2,"div",5),a.Sb(3,"h3",6),a.Ic(4,"Login (get mobile no)"),a.Rb(),a.Sb(5,"p",7),a.Ic(6,"Hi! Please enter your login information below to send submissions as contacts."),a.Rb(),a.Sb(7,"p",8),a.Sb(8,"a",9),a.ec("click",(function(){return a.zc(o),a.gc().changeLoginType("email")})),a.Ic(9,"Login with email?"),a.Rb(),a.Rb(),a.Sb(10,"form",10),a.ec("ngSubmit",(function(){return a.zc(o),a.gc().submitForm()})),a.Sb(11,"div",11),a.Sb(12,"div",12),a.Sb(13,"label"),a.Ic(14,"Phone Number "),a.Sb(15,"span"),a.Ic(16,"*"),a.Rb(),a.Rb(),a.Sb(17,"div",13),a.Sb(18,"div",14),a.Sb(19,"span",15),a.Ic(20),a.Rb(),a.Nb(21,"input",16),a.Rb(),a.Gc(22,f,1,1,"span",17),a.Rb(),a.Rb(),a.Sb(23,"div",18),a.Sb(24,"button",19),a.Ic(25,"Sign In"),a.Rb(),a.Sb(26,"label",20),a.Nb(27,"input",21),a.Sb(28,"span"),a.Ic(29,"Remember me"),a.Rb(),a.Rb(),a.Rb(),a.Sb(30,"a",22),a.Ic(31,"Lost your password?"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&r){var n=a.gc();a.zb(10),a.lc("formGroup",n.loginForm),a.zb(8),a.lc("ngClass",a.qc(7,g,n.formErrors.phone_number)),a.zb(2),a.Jc(null!=n.currentCompany&&n.currentCompany.dial_code?null==n.currentCompany?null:n.currentCompany.dial_code:"+91"),a.zb(1),a.lc("formControl",n.loginForm.controls.phone_number),a.zb(1),a.lc("ngIf",n.formErrors.phone_number),a.zb(2),a.lc("ngClass",a.qc(9,v,n.showLoader))("disabled",n.showLoader)}}function R(r,e){if(1&r){var o=a.Tb();a.Sb(0,"div",3),a.Sb(1,"div",4),a.Sb(2,"div",5),a.Sb(3,"h3",6),a.Ic(4,"Verify otp"),a.Rb(),a.Sb(5,"form",24),a.ec("ngSubmit",(function(){return a.zc(o),a.gc().submitOtpForm()})),a.Sb(6,"div",11),a.Sb(7,"div",12),a.Sb(8,"label"),a.Ic(9,"Enter OTP "),a.Sb(10,"span"),a.Ic(11,"*"),a.Rb(),a.Rb(),a.Nb(12,"input",25),a.Rb(),a.Sb(13,"div",18),a.Sb(14,"button",26),a.Ic(15," Sign In"),a.Rb(),a.Sb(16,"div",27),a.Sb(17,"a",28),a.ec("click",(function(){return a.zc(o),a.gc().resendOTP()})),a.Ic(18,"Resend OTP?"),a.Rb(),a.Rb(),a.Rb(),a.Sb(19,"a",22),a.Ic(20,"Lost your password?"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&r){var n=a.gc();a.zb(5),a.lc("formGroup",n.otpForm),a.zb(9),a.lc("ngClass",a.qc(3,v,n.showLoader))("disabled",n.showLoader)}}var y,_=((y=function(){function r(e,o,n,t,s,c,l){_classCallCheck(this,r),this.router=e,this.config=o,this.activatedRoute=n,this.authService=t,this.fBuilder=s,this.toastrService=c,this.dataService=l,this.currentCompany=[],this.setLoginType=new a.n,this.formErrors={phone_number:null,otp:null,login_pin:null,apierror:null},this.phone_number=null,this.dial_code=null,this.company_id=null,this.showLoader=!1,this.loginPinType=1,this.loginForm=this.fBuilder.group({phone_number:[null,i.q.compose([i.q.required])]}),this.otpForm=this.fBuilder.group({otp:[null,i.q.compose([i.q.required])]}),this.pinForm=this.fBuilder.group({login_pin:[null,i.q.compose([i.q.required,i.q.minLength(4),i.q.maxLength(4)])]})}return _createClass(r,[{key:"ngOnInit",value:function(){this.currentCompany&&(this.dial_code=this.currentCompany.dial_code,this.company_id=this.currentCompany.company_id)}},{key:"changeLoginType",value:function(r){this.setLoginType.emit(r)}},{key:"resetForm",value:function(){t.a.resetForm(this.otpForm),t.a.resetForm(this.loginForm),this.formErrors.login_pin=null,this.formErrors.otp=null,this.formErrors.phone_number=null,this.formErrors.apierror=null}},{key:"submitForm",value:function(){var r=this;this.loginForm.valid&&(this.loginPinType=2,this.showLoader=!0,this.phone_number=this.loginForm.value.phone_number,this.authService.phonelogin({phone_number:this.phone_number,dial_code:this.dial_code,company_id:this.company_id}).subscribe((function(e){r.showLoader=!1,e.success?(r.resetForm(),e.data.verify_otp&&(r.loginPinType=2),e.data.login_pin&&(r.loginPinType=3)):r.formErrors.apierror="* "+e.error}),(function(e){r.formErrors.apierror="* "+e.error,r.showLoader=!1})))}},{key:"submitOtpForm",value:function(){var r=this;if(this.otpForm.valid){this.showLoader=!0;var e={phone_number:this.phone_number,dial_code:this.dial_code,company_id:this.company_id,otp:parseInt(this.otpForm.value.otp)};this.authService.otpverify(e).subscribe((function(e){r.showLoader=!1,e.success?(r.resetForm(),e.data.login_pin&&(r.loginPinType=4)):r.formErrors.apierror="* "+e.error}),(function(e){r.formErrors.apierror="* "+e.error,r.showLoader=!1}))}}},{key:"resendOTP",value:function(){var r=this;this.showLoader=!0,this.authService.resendotp({phone_number:this.phone_number,dial_code:this.dial_code,company_id:this.company_id}).subscribe((function(e){r.showLoader=!1,e.success?(r.resetForm(),r.toastrService.success("OTP sent successfully","")):r.formErrors.apierror="* "+e.error}),(function(e){r.formErrors.apierror="* "+e.error,r.showLoader=!1}))}}]),r}()).\u0275fac=function(r){return new(r||y)(a.Mb(c.e),a.Mb(s.b),a.Mb(c.a),a.Mb(l.a),a.Mb(i.b),a.Mb(m.b),a.Mb(u.a))},y.\u0275cmp=a.Gb({type:y,selectors:[["app-pin"]],inputs:{currentCompany:"currentCompany"},outputs:{setLoginType:"setLoginType"},decls:4,vars:2,consts:[[1,"my_account_area","pt--80","pb--55","bg--white"],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col-lg-6","col-12"],[1,"my__account__wrapper"],[1,"account__title"],[1,"text-center","text-muted"],[1,"text-center","m-b-20"],[1,"",2,"color","#399AF2",3,"click"],[1,"sign-in-form",3,"formGroup","ngSubmit"],[1,"account__form"],[1,"input__box"],[1,"form-group"],[1,"input-group",3,"ngClass"],[1,"input-group-addon"],["number","","type","text","placeholder","Enter Phone Number",1,"form-control",3,"formControl"],["class","help-block",3,"innerHTML",4,"ngIf"],[1,"form__btn"],[3,"ngClass","disabled"],[1,"label-for-checkbox"],["id","rememberme","name","rememberme","value","forever","type","checkbox",1,"input-checkbox"],["routerLink","/forgot-password",1,"forget_pass"],[1,"help-block",3,"innerHTML"],[3,"formGroup","ngSubmit"],["type","text"],["type","submit",3,"ngClass","disabled"],[1,"checkbox","m-b-10","m-t-20"],[1,"float-right","m-b-20",3,"click"]],template:function(r,e){1&r&&(a.Sb(0,"section",0),a.Sb(1,"div",1),a.Gc(2,S,32,11,"div",2),a.Gc(3,R,21,5,"div",2),a.Rb(),a.Rb()),2&r&&(a.zb(2),a.lc("ngIf",1==e.loginPinType),a.zb(1),a.lc("ngIf",2==e.loginPinType))},directives:[n.m,i.s,i.j,p.a,i.d,n.k,i.a,d.a,i.i,i.c,h.a,c.h],encapsulation:2}),y);function w(r,e){if(1&r){var o=a.Tb();a.Sb(0,"app-pin",2),a.ec("setLoginType",(function(r){return a.zc(o),a.gc().getLoginType(r)})),a.Rb()}if(2&r){var n=a.gc();a.lc("currentCompany",n.currentCompany)}}function L(r,e){if(1&r){var o=a.Tb();a.Sb(0,"div",25),a.Sb(1,"a",26),a.ec("click",(function(){return a.zc(o),a.gc(2).removeError()})),a.Ic(2,"\xd7"),a.Rb(),a.Nb(3,"span",27),a.Rb()}if(2&r){var n=a.gc(2);a.zb(3),a.lc("innerHTML",n.formErrors.apierror,a.Ac)}}function I(r,e){if(1&r){var o=a.Tb();a.Sb(0,"div",25),a.Sb(1,"a",26),a.ec("click",(function(){return a.zc(o),a.gc(2).removeError()})),a.Ic(2,"\xd7"),a.Rb(),a.Nb(3,"span",27),a.Rb()}if(2&r){var n=a.gc(2);a.zb(3),a.lc("innerHTML",n.formError.apierror,a.Ac)}}var C=function(r){return{"fa fa-spinner fa-spin":r}};function F(r,e){if(1&r){var o=a.Tb();a.Sb(0,"section",3),a.Sb(1,"div",4),a.Sb(2,"div",5),a.Sb(3,"div",6),a.Sb(4,"div",7),a.Sb(5,"h3",8),a.Ic(6,"Login"),a.Rb(),a.Sb(7,"p",9),a.Sb(8,"a",10),a.ec("click",(function(){return a.zc(o),a.gc().changeLoginType("phone")})),a.Ic(9,"Login with phone?"),a.Rb(),a.Rb(),a.Sb(10,"form",11),a.ec("ngSubmit",(function(){return a.zc(o),a.gc().submitForm()})),a.Sb(11,"div",12),a.Gc(12,L,4,1,"div",13),a.Sb(13,"div",14),a.Sb(14,"label"),a.Ic(15,"Email Address "),a.Sb(16,"span"),a.Ic(17,"*"),a.Rb(),a.Rb(),a.Nb(18,"input",15),a.Rb(),a.Sb(19,"div",14),a.Sb(20,"div",16),a.Sb(21,"label"),a.Ic(22,"Password"),a.Sb(23,"span"),a.Ic(24,"*"),a.Rb(),a.Rb(),a.Nb(25,"input",17),a.Rb(),a.Rb(),a.Sb(26,"div",18),a.Sb(27,"button",19),a.Ic(28," Sign In "),a.Rb(),a.Sb(29,"label",20),a.Nb(30,"input",21),a.Sb(31,"span"),a.Ic(32,"Remember me"),a.Rb(),a.Rb(),a.Rb(),a.Sb(33,"a",22),a.Ic(34,"Lost your password?"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(35,"div",6),a.Sb(36,"div",7),a.Sb(37,"h3",8),a.Ic(38,"Register"),a.Rb(),a.Sb(39,"form",23),a.ec("ngSubmit",(function(){return a.zc(o),a.gc().submitRegisterForm()})),a.Sb(40,"div",12),a.Gc(41,I,4,1,"div",13),a.Sb(42,"div",14),a.Sb(43,"label"),a.Ic(44,"Usename "),a.Sb(45,"span"),a.Ic(46,"*"),a.Rb(),a.Rb(),a.Nb(47,"input",24),a.Rb(),a.Sb(48,"div",14),a.Sb(49,"label"),a.Ic(50,"Email address "),a.Sb(51,"span"),a.Ic(52,"*"),a.Rb(),a.Rb(),a.Nb(53,"input",15),a.Rb(),a.Sb(54,"div",14),a.Sb(55,"label"),a.Ic(56,"Password"),a.Sb(57,"span"),a.Ic(58,"*"),a.Rb(),a.Rb(),a.Nb(59,"input",17),a.Rb(),a.Sb(60,"div",18),a.Sb(61,"button",19),a.Ic(62," Register "),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&r){var n=a.gc();a.zb(10),a.lc("formGroup",n.loginForm),a.zb(2),a.lc("ngIf",n.formErrors.apierror),a.zb(6),a.lc("formControl",n.loginForm.controls.email),a.zb(7),a.lc("formControl",n.loginForm.controls.password),a.zb(2),a.lc("ngClass",a.qc(13,C,n.showLoader))("disabled",n.showLoader),a.zb(12),a.lc("formGroup",n.RegisterForm),a.zb(2),a.lc("ngIf",n.formError.apierror),a.zb(6),a.lc("formControl",n.RegisterForm.controls.name),a.zb(6),a.lc("formControl",n.RegisterForm.controls.email),a.zb(6),a.lc("formControl",n.RegisterForm.controls.password),a.zb(2),a.lc("ngClass",a.qc(15,C,n.showLoaderr))("disabled",n.showLoaderr)}}var T,k,q=((T=function(){function r(e,o,n,a,s,c,l){_classCallCheck(this,r),this.config=e,this.router=o,this.activatedRoute=n,this.authService=a,this.commonService=s,this.fBuilder=c,this.dataService=l,this.formErrors={apierror:null},this.formError={apierror:null},this.showLoader=!1,this.showLoaderr=!1,this.currentCompany=null,this.loginType="email",this.config.config={showHeader:!1},this.loginForm=this.fBuilder.group({email:[null,i.q.compose([i.q.required,t.f])],password:[null,i.q.compose([i.q.required])]}),this.RegisterForm=this.fBuilder.group({email:[null,i.q.compose([i.q.required,t.f])],password:[null,i.q.compose([i.q.required])],name:[null,i.q.compose([i.q.required])]})}return _createClass(r,[{key:"ngOnInit",value:function(){}},{key:"changeLoginType",value:function(r){this.loginType=r}},{key:"getLoginType",value:function(r){this.loginType=r}},{key:"removeError",value:function(){this.formErrors.apierror=null,this.formError.apierror=null}},{key:"submitForm",value:function(){var r=this;if(this.loginForm.valid){this.showLoader=!0;var e={email:this.loginForm.value.email.toLowerCase(),password:this.loginForm.value.password,remember_me:this.loginForm.value.remember_me};this.authService.login(e).subscribe((function(e){if(console.log("In success",e),r.showLoader=!1,e.success){t.a.resetForm(r.loginForm),r.dataService.setAuth(e.data),r.config.config={showHeader:!0},r.activatedRoute.snapshot.queryParamMap.get("next");var o=r.activatedRoute.snapshot.queryParamMap.get("next")?r.activatedRoute.snapshot.queryParamMap.get("next"):"/home";r.router.navigateByUrl(o)}else r.formErrors.apierror="* "+e.error}),(function(e){console.log("In error",e),r.formErrors.apierror="* "+e.error.error,r.showLoader=!1}))}}},{key:"submitRegisterForm",value:function(){var r=this;if(this.RegisterForm.valid){this.showLoaderr=!0;var e={email:this.RegisterForm.value.email.toLowerCase(),password:this.RegisterForm.value.password,name:this.RegisterForm.value.name,type:{value:0,label:"normal_user"}};this.authService.register(e).subscribe((function(e){if(console.log("In success",e),r.showLoaderr=!1,e.success){t.a.resetForm(r.RegisterForm),r.dataService.setAuth(e.data),r.config.config={showHeader:!0},r.activatedRoute.snapshot.queryParamMap.get("next");var o=r.activatedRoute.snapshot.queryParamMap.get("next")?r.activatedRoute.snapshot.queryParamMap.get("next"):"/home";r.router.navigateByUrl(o)}else r.formError.apierror="* "+e.error}),(function(e){r.formError.apierror="* "+e.error.error,r.showLoaderr=!1}))}}}]),r}()).\u0275fac=function(r){return new(r||T)(a.Mb(s.b),a.Mb(c.e),a.Mb(c.a),a.Mb(l.a),a.Mb(b.a),a.Mb(i.b),a.Mb(u.a))},T.\u0275cmp=a.Gb({type:T,selectors:[["app-login"]],decls:2,vars:2,consts:[[3,"currentCompany","setLoginType",4,"ngIf"],["class","my_account_area pt--80 pb--55 bg--white",4,"ngIf"],[3,"currentCompany","setLoginType"],[1,"my_account_area","pt--80","pb--55","bg--white"],[1,"container"],[1,"row"],[1,"col-lg-6","col-12"],[1,"my__account__wrapper"],[1,"account__title"],[1,"text-center","m-b-20"],[1,"",2,"color","#399AF2",3,"click"],[1,"sign-in-form","shadow-lg",3,"formGroup","ngSubmit"],[1,"account__form"],["class","alert alert-danger alert-dismissible",4,"ngIf"],[1,"input__box"],["type","text","autofocus","","placeholder","Email ID",1,"form-control","input-lg",3,"formControl"],[1,"form-group"],["type","password","placeholder","Password",1,"form-control","input-lg",3,"formControl"],[1,"form__btn"],["type","submit",3,"ngClass","disabled"],[1,"label-for-checkbox"],["id","rememberme","name","rememberme","value","forever","type","checkbox",1,"input-checkbox"],["routerLink","/forgot-password",1,"forget_pass"],[1,"shadow-none",3,"formGroup","ngSubmit"],["type","text","autofocus","","placeholder","Username",1,"form-control","input-lg",3,"formControl"],[1,"alert","alert-danger","alert-dismissible"],["data-dismiss","alert","aria-label","close",1,"close",3,"click"],[1,"h6",3,"innerHTML"]],template:function(r,e){1&r&&(a.Gc(0,w,1,1,"app-pin",0),a.Gc(1,F,63,17,"section",1)),2&r&&(a.lc("ngIf","phone"==e.loginType),a.zb(1),a.lc("ngIf","email"==e.loginType))},directives:[n.m,_,i.s,i.j,p.a,i.d,i.a,i.i,i.c,h.a,n.k,c.h],encapsulation:2}),T),E=o("Eqhp"),z=o("PCNd"),P=[{path:"",component:q,data:{title:"login"}},{path:"pin",component:_,data:{title:"login"}}],M=((k=function r(){_classCallCheck(this,r)}).\u0275mod=a.Kb({type:k}),k.\u0275inj=a.Jb({factory:function(r){return new(r||k)},providers:[l.a],imports:[[n.b,i.e,i.o,E.a,z.a,c.i.forChild(P)]]}),k)}}]);